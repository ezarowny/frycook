<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>frycook.recipe_template.Recipe</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="frycook-module.html">Package&nbsp;frycook</a> ::
        <a href="frycook.recipe_template-module.html">Module&nbsp;recipe_template</a> ::
        Class&nbsp;Recipe
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="frycook.recipe_template.Recipe-class.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class Recipe</h1><p class="nomargin-top"><span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe">source&nbsp;code</a></span></p>
<pre class="base-tree">
object --+
         |
        <strong class="uidshort">Recipe</strong>
</pre>

<hr />
<p>The Recipe class is the base class for all recipes to subclass.  It 
  defines the framework for recipes and some helper functions.  By itself 
  it doesn't do much.</p>
  <p>It has a set of helper functions that are hooks called by frycooker to
  apply the recipe to a remote server:</p>
<pre class="literalblock">
   handle_pre_apply_message()
   handle_post_apply_message()
   run_apply()
   run_messages()
</pre>
  <p>It has another set of helper functions used within recipes for copying
  files to remote servers:</p>
<pre class="literalblock">
   get_local_file_perms()
   push_file()
   push_template()
   push_package_file_set()
</pre>
  <p>It has a final set of helper functions used within recipes for 
  managing git repos on remote servers:</p>
<pre class="literalblock">
   push_git_repo()
   clone_git_repo()
   update_git_repo()
   is_git_repo()
   ensure_git_repo()
</pre>

<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="frycook.recipe_template.Recipe-class.html#__init__" class="summary-sig-name">__init__</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">settings</span>,
        <span class="summary-sig-arg">environment</span>,
        <span class="summary-sig-arg">ok_to_be_rude</span>,
        <span class="summary-sig-arg">no_prompt</span>)</span><br />
      Initialize the recipe object with the settings and environment 
      dictionaries.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.__init__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="handle_pre_apply_message"></a><span class="summary-sig-name">handle_pre_apply_message</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Print the pre-apply message for the user and wait for him/her to hit 
      return before continuing.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.handle_pre_apply_message">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="handle_post_apply_message"></a><span class="summary-sig-name">handle_post_apply_message</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Print the post-apply message for the user and wait for him/her to hit
      return before continuing.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.handle_post_apply_message">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="frycook.recipe_template.Recipe-class.html#pre_apply_checks" class="summary-sig-name">pre_apply_checks</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">computer</span>)</span><br />
      Define checks to run before applying the recipe.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.pre_apply_checks">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="frycook.recipe_template.Recipe-class.html#apply" class="summary-sig-name">apply</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">computer</span>)</span><br />
      Define the actions to take place when this recipe is applied to a 
      computer.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.apply">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="frycook.recipe_template.Recipe-class.html#run_apply" class="summary-sig-name">run_apply</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">computer</span>)</span><br />
      Run the apply sequence of functions.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.run_apply">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="run_messages"></a><span class="summary-sig-name">run_messages</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Print the pre and post apply messages only, as if the apply had been 
      run.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.run_messages">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">string</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="frycook.recipe_template.Recipe-class.html#get_local_file_perms" class="summary-sig-name">get_local_file_perms</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">local_name</span>)</span><br />
      Get a string of the permissions set on a local file.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.get_local_file_perms">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="frycook.recipe_template.Recipe-class.html#push_file" class="summary-sig-name">push_file</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">local_name</span>,
        <span class="summary-sig-arg">remote_name</span>,
        <span class="summary-sig-arg">owner</span>,
        <span class="summary-sig-arg">group</span>,
        <span class="summary-sig-arg">perms</span>=<span class="summary-sig-default">None</span>)</span><br />
      Copy a file to a remote server if the file is different or doesn't 
      exist.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.push_file">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="frycook.recipe_template.Recipe-class.html#push_template" class="summary-sig-name">push_template</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">templatename</span>,
        <span class="summary-sig-arg">out_path</span>,
        <span class="summary-sig-arg">enviro</span>,
        <span class="summary-sig-arg">owner</span>,
        <span class="summary-sig-arg">group</span>,
        <span class="summary-sig-arg">perms</span>=<span class="summary-sig-default">None</span>)</span><br />
      Process a template file and push its contents to a remote server if 
      it's different than what's already there.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.push_template">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="frycook.recipe_template.Recipe-class.html#_push_package_file_set" class="summary-sig-name" onclick="show_private();">_push_package_file_set</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">package_name</span>,
        <span class="summary-sig-arg">template_env</span>)</span><br />
      Implement the file copying and deleting portion of the 
      push_package_file_set operation.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe._push_package_file_set">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="frycook.recipe_template.Recipe-class.html#push_package_file_set" class="summary-sig-name">push_package_file_set</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">package_name</span>,
        <span class="summary-sig-arg">computer_name</span>,
        <span class="summary-sig-arg">aux_env</span>=<span class="summary-sig-default">None</span>)</span><br />
      Copy a set of files to a remote server, maintaining the same 
      directory structure and processing any templates encountered.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.push_package_file_set">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="frycook.recipe_template.Recipe-class.html#push_git_repo" class="summary-sig-name">push_git_repo</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">computer</span>,
        <span class="summary-sig-arg">user</span>,
        <span class="summary-sig-arg">group</span>,
        <span class="summary-sig-arg">git_url</span>,
        <span class="summary-sig-arg">target_path</span>)</span><br />
      Make a local clone of the repo in git_url into the temp directory 
      specified in the settings file, then rsync it to the remote path.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.push_git_repo">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="frycook.recipe_template.Recipe-class.html#clone_git_repo" class="summary-sig-name">clone_git_repo</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">user</span>,
        <span class="summary-sig-arg">git_url</span>,
        <span class="summary-sig-arg">target_path</span>)</span><br />
      Clone a git repo on a remote server.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.clone_git_repo">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="frycook.recipe_template.Recipe-class.html#update_git_repo" class="summary-sig-name">update_git_repo</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">user</span>,
        <span class="summary-sig-arg">git_url</span>,
        <span class="summary-sig-arg">target_path</span>)</span><br />
      Update an existing git repo on a remote server.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.update_git_repo">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">boolean</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="frycook.recipe_template.Recipe-class.html#is_git_repo" class="summary-sig-name">is_git_repo</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">target_path</span>)</span><br />
      Make sure the target path exists on the remote computer and is really
      a git repo.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.is_git_repo">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">boolean</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="frycook.recipe_template.Recipe-class.html#ensure_git_repo" class="summary-sig-name">ensure_git_repo</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">user</span>,
        <span class="summary-sig-arg">git_url</span>,
        <span class="summary-sig-arg">target_path</span>)</span><br />
      Make sure a git repo exists in the target path on the remote 
      computer.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.ensure_git_repo">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__delattr__</code>,
      <code>__format__</code>,
      <code>__getattribute__</code>,
      <code>__hash__</code>,
      <code>__new__</code>,
      <code>__reduce__</code>,
      <code>__reduce_ex__</code>,
      <code>__repr__</code>,
      <code>__setattr__</code>,
      <code>__sizeof__</code>,
      <code>__str__</code>,
      <code>__subclasshook__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== CLASS VARIABLES ==================== -->
<a name="section-ClassVariables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Class Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-ClassVariables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="pre_apply_message"></a><span class="summary-name">pre_apply_message</span> = <code title="''"><code class="variable-quote">'</code><code class="variable-string"></code><code class="variable-quote">'</code></code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="post_apply_message"></a><span class="summary-name">post_apply_message</span> = <code title="''"><code class="variable-quote">'</code><code class="variable-string"></code><code class="variable-quote">'</code></code>
    </td>
  </tr>
</table>
<!-- ==================== PROPERTIES ==================== -->
<a name="section-Properties"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Properties</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Properties"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__class__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Method Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-MethodDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="__init__"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">__init__</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">settings</span>,
        <span class="sig-arg">environment</span>,
        <span class="sig-arg">ok_to_be_rude</span>,
        <span class="sig-arg">no_prompt</span>)</span>
    <br /><em class="fname">(Constructor)</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.__init__">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Initialize the recipe object with the settings and environment 
  dictionaries.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>settings</code></strong> (dict) - settings dictionary</li>
        <li><strong class="pname"><code>environment</code></strong> (dict) - metadata dictionary</li>
        <li><strong class="pname"><code>ok_to_be_rude</code></strong> (boolean) - is it ok to interrupt your users?</li>
        <li><strong class="pname"><code>no_prompt</code></strong> (boolean) - should we prompt the user?</li>
    </ul></dd>
    <dt>Overrides:
        object.__init__
    </dt>
  </dl>
</td></tr></table>
</div>
<a name="pre_apply_checks"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">pre_apply_checks</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">computer</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.pre_apply_checks">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Define checks to run before applying the recipe.  The base class 
  checks that the designated computer exists in the environment dictionary.
  This is a good place to check other things in your environment dictionary
  that the apply function expects to be there.  Override this function in 
  your subclass of Recipe if you have any checks to perform. Raise a 
  RecipeException if you encounter exceptional conditions.  Be sure to call
  the base class function to make sure its checks get done as well.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>computer</code></strong> (string) - name of computer to apply recipe checks to</li>
    </ul></dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="frycook.recipe_template.RecipeException-class.html">RecipeException</a></strong></code> - raised if the computer name is not in the environment being 
        processed</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="apply"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">apply</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">computer</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.apply">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Define the actions to take place when this recipe is applied to a 
  computer.  Override this function in your subclass of Recipe if you have 
  any actions to apply.  If you don't have any actions, then why are you 
  creating a recipe?</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>computer</code></strong> (string) - name of computer to apply recipe to</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="run_apply"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">run_apply</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">computer</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.run_apply">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Run the apply sequence of functions.  This is typically called by 
  frycooker.</p>
  <p>Sequence:</p>
<pre class="literalblock">
 pre_apply_checks() -&gt; apply()
</pre>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>computer</code></strong> (string) - name of computer to apply recipe to</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="get_local_file_perms"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">get_local_file_perms</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">local_name</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.get_local_file_perms">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Get a string of the permissions set on a local file.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>local_name</code></strong> (string) - path to file on local file system</li>
    </ul></dd>
    <dt>Returns: string</dt>
        <dd>string containing perms of file, ie. '655'</dd>
  </dl>
</td></tr></table>
</div>
<a name="push_file"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">push_file</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">local_name</span>,
        <span class="sig-arg">remote_name</span>,
        <span class="sig-arg">owner</span>,
        <span class="sig-arg">group</span>,
        <span class="sig-arg">perms</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.push_file">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Copy a file to a remote server if the file is different or doesn't 
  exist.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>local_name</code></strong> (string) - path within packages dir of file to upload (path + filename)</li>
        <li><strong class="pname"><code>remote_name</code></strong> (string) - remote path to write file to (path + filename)</li>
        <li><strong class="pname"><code>owner</code></strong> (string) - owner of the file</li>
        <li><strong class="pname"><code>group</code></strong> (string) - group of the file</li>
        <li><strong class="pname"><code>perms</code></strong> (string) - permissions for the file, ie. '655'</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="push_template"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">push_template</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">templatename</span>,
        <span class="sig-arg">out_path</span>,
        <span class="sig-arg">enviro</span>,
        <span class="sig-arg">owner</span>,
        <span class="sig-arg">group</span>,
        <span class="sig-arg">perms</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.push_template">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Process a template file and push its contents to a remote server if 
  it's different than what's already there.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>templatename</code></strong> (string) - path within packages dir of template file to process (path + 
          filename)</li>
        <li><strong class="pname"><code>out_path</code></strong> (string) - path on remote server to write file to (path + filename)</li>
        <li><strong class="pname"><code>enviro</code></strong> (dict) - environment dictionary for template engine</li>
        <li><strong class="pname"><code>owner</code></strong> (string) - owner of the templated file</li>
        <li><strong class="pname"><code>group</code></strong> (string) - group of the templated file</li>
        <li><strong class="pname"><code>perms</code></strong> (string) - permissions for the templated file, ie. '655'</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="_push_package_file_set"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_push_package_file_set</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">package_name</span>,
        <span class="sig-arg">template_env</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe._push_package_file_set">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Implement the file copying and deleting portion of the 
  push_package_file_set operation.  The calling function sets up the 
  template environment, then calls this one.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>package_name</code></strong> (string) - name of package to process, corresponds to directory in packages 
          directory</li>
        <li><strong class="pname"><code>template_env</code></strong> (dict) - environment dictionary for template engine</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="push_package_file_set"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">push_package_file_set</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">package_name</span>,
        <span class="sig-arg">computer_name</span>,
        <span class="sig-arg">aux_env</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.push_package_file_set">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Copy a set of files to a remote server, maintaining the same directory
  structure and processing any templates encountered. This copies the files
  to the root of the destination, so that things like /etc/hosts or 
  /etc/nginx/nginx.conf get put in the right place.</p>
  <p>First create a directory with the same name as package_name in your 
  root packages directory.  Then create a directory structure under that 
  that mirrors the target machine and all files will get copied there in 
  the correct place.</p>
  <p>For template file processing, a default environment dictionary will be
  passed in consisting of:</p>
<pre class="literalblock">
 {&quot;computer&quot;: host_env[&quot;computers&quot;][computer_name]}
</pre>
  <p>Template files have a .tmplt extension.</p>
  <p>If aux_env is given, it will be added to the default dictionary using 
  dict.update() after the default dictionary is constructed.  This means 
  that if you pass in an aux_env dictionary with a key called 
  &quot;computer&quot;, that that key will over-write the default key of 
  that name.</p>
  <p>If a file named fck_metadata.txt is encountered in a directory, then 
  it's expected to have contents of lines consisting of 
  &lt;path&gt;:&lt;owner&gt;:&lt;group&gt;:&lt;perms&gt; that specifies the
  owner, group, and permissions for the path specified 
  (directory-relative).</p>
  <p>If a file named fck_delete.txt is encountered in a directory, then 
  it's expected to have contents of lines containing names of files to 
  delete, one per line.  This way you can clean out a directory as well as 
  copy files to it.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>package_name</code></strong> (string) - name of package to process, corresponds to directory in packages 
          directory</li>
        <li><strong class="pname"><code>template_env</code></strong> (dict) - environment dictionary for template engine</li>
        <li><strong class="pname"><code>aux_env</code></strong> (dict) - additional key/value pairs for the template environment</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="push_git_repo"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">push_git_repo</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">computer</span>,
        <span class="sig-arg">user</span>,
        <span class="sig-arg">group</span>,
        <span class="sig-arg">git_url</span>,
        <span class="sig-arg">target_path</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.push_git_repo">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Make a local clone of the repo in git_url into the temp directory 
  specified in the settings file, then rsync it to the remote path.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>computer</code></strong> (string) - computer name to push to</li>
        <li><strong class="pname"><code>user</code></strong> (string) - user to own the files in the repo</li>
        <li><strong class="pname"><code>group</code></strong> (string) - group to own the files in the repo</li>
        <li><strong class="pname"><code>git_url</code></strong> (string) - git url of repo (probably from github)</li>
        <li><strong class="pname"><code>target_path</code></strong> (string) - root path on remote server to copy git repo to</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="clone_git_repo"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">clone_git_repo</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">user</span>,
        <span class="sig-arg">git_url</span>,
        <span class="sig-arg">target_path</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.clone_git_repo">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Clone a git repo on a remote server.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>git_url</code></strong> (string) - git url of repo (probably from github)</li>
        <li><strong class="pname"><code>target_path</code></strong> (string) - root path on remote server to clone git repo into</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="update_git_repo"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">update_git_repo</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">user</span>,
        <span class="sig-arg">git_url</span>,
        <span class="sig-arg">target_path</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.update_git_repo">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Update an existing git repo on a remote server.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>git_url</code></strong> (string) - git url of repo (probably from github)</li>
        <li><strong class="pname"><code>target_path</code></strong> (string) - root path on remote server to update git repo in</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="is_git_repo"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">is_git_repo</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">target_path</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.is_git_repo">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Make sure the target path exists on the remote computer and is really 
  a git repo.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>git_url</code></strong> (string) - git url of repo (probably from github)</li>
        <li><strong class="pname"><code>target_path</code></strong> (string) - root path on remote server to check git repo</li>
    </ul></dd>
    <dt>Returns: boolean</dt>
        <dd>True if repo already existed, False if not</dd>
  </dl>
</td></tr></table>
</div>
<a name="ensure_git_repo"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">ensure_git_repo</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">user</span>,
        <span class="sig-arg">git_url</span>,
        <span class="sig-arg">target_path</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="frycook.recipe_template-pysrc.html#Recipe.ensure_git_repo">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Make sure a git repo exists in the target path on the remote 
  computer.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>git_url</code></strong> (string) - git url of repo (probably from github)</li>
        <li><strong class="pname"><code>target_path</code></strong> (string) - root path on remote server to check git repo</li>
    </ul></dd>
    <dt>Returns: boolean</dt>
        <dd>True if repo already existed, False if not</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Mon Feb 24 09:31:58 2014
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
